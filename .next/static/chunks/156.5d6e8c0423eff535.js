"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{1156:function(e,t,r){r.r(t),r.d(t,{default:function(){return m}});var s=r(5893),a=r(7294),l=r(3454);class n{async planDistributionStrategy(e){try{let t=await fetch("/api/copilot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4",stream:!0,messages:[{role:"system",content:"You are a music distribution strategist. Format your response in markdown with proper headers, lists, and sections."},{role:"user",content:"Create a detailed distribution strategy for artist ".concat(e.artistName,"'s track \"").concat(e.trackTitle,'" (').concat(e.genre,"). Budget: $").concat(e.marketingBudget,". Platforms: ").concat(e.distributionPlatforms.join(", "),". Include sections for budget allocation, strategy overview, action plan, and timeline.")}]})});if(!t.ok)throw Error("Failed to generate strategy");return t}catch(e){throw e instanceof Error?e:Error("Failed to generate strategy")}}constructor(){this.apiKey=l.env.OPENAI_API_KEY||""}}var i=r(3495),o=r(5830),c=r(4585),d=r(4958),u=e=>{let{strategy:t,isStreaming:r}=e,l=(0,a.useRef)(null);(0,a.useEffect)(()=>{l.current&&r&&l.current.scrollIntoView({behavior:"smooth",block:"end"})},[t,r]);let n=e=>e.split("data: ").map(e=>{try{return JSON.parse(e).content}catch(e){return""}}).join("");return(0,s.jsxs)(i.E.div,{className:"bg-white/80 backdrop-blur-sm shadow-xl rounded-[25px] p-8",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold",children:["Generated Strategy ",r&&(0,s.jsx)("span",{className:"text-blue-600 animate-pulse",children:"•"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=n(t).replace(/#{1,6} /g,"").replace(/\*\*/g,"").replace(/- /g,"• ").split("\n").map(e=>e.trim()).filter(Boolean).join("\n\n"),r=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download="distribution-strategy.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:r,children:[(0,s.jsx)(o.Z,{size:16}),"Download"]})]}),(0,s.jsxs)("div",{className:"prose prose-slate max-w-none",ref:l,children:[(0,s.jsx)(c.U,{remarkPlugins:[d.Z],components:{h1:e=>{let{...t}=e;return(0,s.jsx)("h1",{className:"text-2xl font-bold my-4 text-gray-900",...t})},h2:e=>{let{...t}=e;return(0,s.jsx)("h2",{className:"text-xl font-semibold my-3 text-gray-800",...t})},h3:e=>{let{...t}=e;return(0,s.jsx)("h3",{className:"text-lg font-medium my-2 text-gray-800",...t})},p:e=>{let{...t}=e;return(0,s.jsx)("p",{className:"my-2 text-gray-700 leading-relaxed",...t})},ul:e=>{let{...t}=e;return(0,s.jsx)("ul",{className:"list-disc ml-4 my-2 space-y-1",...t})},ol:e=>{let{...t}=e;return(0,s.jsx)("ol",{className:"list-decimal ml-4 my-2 space-y-1",...t})},li:e=>{let{...t}=e;return(0,s.jsx)("li",{className:"my-1 text-gray-700",...t})},strong:e=>{let{...t}=e;return(0,s.jsx)("strong",{className:"font-semibold text-gray-900",...t})},em:e=>{let{...t}=e;return(0,s.jsx)("em",{className:"italic text-gray-800",...t})}},children:n(t)}),r&&(0,s.jsx)("div",{className:"h-4 w-2 bg-blue-600 animate-pulse rounded-full ml-1 inline-block"})]})]})},m=()=>{let[e,t]=(0,a.useState)(!1),[r,l]=(0,a.useState)({artistName:"",trackTitle:"",genre:"",releaseDate:"",marketingBudget:0,distributionPlatforms:[]}),[i,o]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[m,p]=(0,a.useState)(!1),x=new n,b=e=>{let{name:t,value:r}=e.target;l(e=>({...e,[t]:r}))},g=async e=>{e.preventDefault(),t(!0),p(!0),o("");try{let e=await x.planDistributionStrategy(r);if(!e.body)throw Error("No response body");let t=e.body.getReader(),s="";for(;;){let{done:e,value:r}=await t.read();if(e)break;let a=new TextDecoder().decode(r);s+=a,o(s)}}catch(e){console.error("Error:",e)}finally{t(!1),p(!1)}},h=async e=>{try{l(t=>({...t,distributionPlatforms:t.distributionPlatforms.includes(e)?t.distributionPlatforms.filter(t=>t!==e):[...t.distributionPlatforms,e]}))}catch(e){console.error("Error updating platforms:",e)}};return(0,s.jsx)("div",{className:"container mx-auto px-4 py-8 min-h-screen",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-[1fr,1.5fr] gap-8",children:[(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm shadow-xl rounded-[25px] p-6 md:p-8 h-fit",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"New Release Project"}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Artist Name"}),(0,s.jsx)("input",{type:"text",name:"artistName",value:r.artistName,onChange:b,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Track Title"}),(0,s.jsx)("input",{type:"text",name:"trackTitle",value:r.trackTitle,onChange:b,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Genre"}),(0,s.jsxs)("select",{name:"genre",value:r.genre,onChange:b,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Genre"}),(0,s.jsx)("option",{value:"Pop",children:"Pop"}),(0,s.jsx)("option",{value:"Hip Hop",children:"Hip Hop"}),(0,s.jsx)("option",{value:"R&B",children:"R&B"}),(0,s.jsx)("option",{value:"Rock",children:"Rock"}),(0,s.jsx)("option",{value:"Electronic",children:"Electronic"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Marketing Budget ($)"}),(0,s.jsx)("input",{type:"number",name:"marketingBudget",value:r.marketingBudget,onChange:b,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,min:"0"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Distribution Platforms"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["Spotify","Apple Music","YouTube Music","Amazon Music","TikTok"].map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:r.distributionPlatforms.includes(e),onChange:()=>h(e),className:"mr-2"}),(0,s.jsx)("span",{className:"text-sm",children:e})]},e))})]}),(0,s.jsx)("button",{type:"submit",disabled:e,className:"w-full py-3 px-6 bg-blue-600 text-white rounded-lg font-medium  hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-solid border-current border-r-transparent"}),"Generating Strategy..."]}):"Generate Strategy"})]})]}),(i||c)&&(0,s.jsx)(u,{strategy:i||c,isStreaming:m})]})})}}}]);