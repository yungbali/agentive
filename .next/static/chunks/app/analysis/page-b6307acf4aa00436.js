(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{7587:function(){},3771:function(){},4378:function(){},6422:function(){},569:function(){},5117:function(){},8606:function(){},3793:function(){},8192:function(){},4190:function(e,t,a){Promise.resolve().then(a.bind(a,5815))},5815:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(7437),n=a(2265),i=a(429),l=a(5626),r=a(7689),o=a(7700),c=a(8254);let d=e=>{let{title:t,items:a,icon:n}=e;return(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[(0,s.jsx)("span",{children:n}),t]}),(0,s.jsx)("ul",{className:"list-disc list-inside space-y-2",children:a.map((e,t)=>(0,s.jsx)("li",{className:"text-gray-200",children:e},t))})]})};var u=e=>{let{audioFeatures:t}=e,a=function(e){let t={targetAudience:[],platforms:[],promotionalIdeas:[],playlistRecommendations:[],timingRecommendations:[]};return e.tempo>120&&e.energy>.7?(t.targetAudience.push("Young, energetic audience (18-25)"),t.targetAudience.push("Fitness enthusiasts")):"Calm"===e.mood&&(t.targetAudience.push("Study/work focus groups"),t.targetAudience.push("Meditation and wellness community")),e.danceability>.7&&(t.platforms.push("TikTok - High viral potential"),t.platforms.push("Instagram Reels")),t.platforms.push("Spotify"),t.platforms.push("Apple Music"),e.energy>.8?(t.promotionalIdeas.push("Create high-energy video content"),t.promotionalIdeas.push("Partner with fitness influencers")):"Calm"===e.mood&&(t.promotionalIdeas.push("Create ambient visualizer videos"),t.promotionalIdeas.push("Partner with wellness brands")),e.tempo>120?(t.playlistRecommendations.push("Workout/Exercise playlists"),t.playlistRecommendations.push("High Energy Mix")):"Calm"===e.mood&&(t.playlistRecommendations.push("Focus/Study playlists"),t.playlistRecommendations.push("Chill Vibes")),e.energy>.7?(t.timingRecommendations.push("Release during peak workout hours (6-8 AM, 5-7 PM)"),t.timingRecommendations.push("Target weekend release for maximum impact")):(t.timingRecommendations.push("Release during typical study/work hours"),t.timingRecommendations.push("Mid-week release for steady growth")),t}(t);return(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6 mt-8",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold mb-6",children:"Marketing Strategy"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(d,{title:"Target Audience",items:a.targetAudience,icon:"\uD83D\uDC65"}),(0,s.jsx)(d,{title:"Recommended Platforms",items:a.platforms,icon:"\uD83D\uDCF1"}),(0,s.jsx)(d,{title:"Promotional Ideas",items:a.promotionalIdeas,icon:"\uD83D\uDCA1"}),(0,s.jsx)(d,{title:"Playlist Recommendations",items:a.playlistRecommendations,icon:"\uD83C\uDFB5"}),(0,s.jsx)(d,{title:"Best Release Timing",items:a.timingRecommendations,icon:"‚è∞"})]})]})},m=a(166);class h{async analyzeMusicFile(e){try{let t=await e.arrayBuffer(),a=await this.audioContext.decodeAudioData(t),s=await this.detectTempo(a),{key:n,scale:i}=await this.detectKeyAndScale(a),l=await this.analyzeMood(a),r=await this.calculateEnergy(a),o=await this.calculateDanceability(a);return{tempo:s,key:n,scale:i,mood:l,energy:r,danceability:o}}catch(e){throw console.error("Audio analysis failed:",e),e}}async detectTempo(e){let t=e.getChannelData(0),a=this.findPeaks(t),s=this.getIntervals(a);return Math.round(this.calculateBPM(s,e.sampleRate))}findPeaks(e){let t=[];for(let a=1;a<e.length-1;a++)e[a]>e[a-1]&&e[a]>e[a+1]&&e[a]>.8&&t.push(a);return t}getIntervals(e){let t=[];for(let a=1;a<e.length;a++)t.push(e[a]-e[a-1]);return t}calculateBPM(e,t){return 60*t/(e.reduce((e,t)=>e+t)/e.length)}async detectKeyAndScale(e){return{key:"C",scale:"Major"}}async analyzeMood(e){let t=await this.calculateEnergy(e),a=await this.calculateDanceability(e);return t>.8?"Energetic":t>.6&&a>.7?"Happy":t<.4?"Calm":"Neutral"}async calculateEnergy(e){let t=e.getChannelData(0),a=0;for(let e=0;e<t.length;e++)a+=t[e]*t[e];return a/t.length}async calculateDanceability(e){let t=e.getChannelData(0),a=this.findPeaks(t),s=this.getIntervals(a),n=s.reduce((e,t)=>e+t)/s.length;return 1-Math.min(s.reduce((e,t)=>e+Math.pow(t-n,2),0)/s.length/n,1)}constructor(){this.audioContext=new AudioContext,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048}}let p=(0,m.default)(()=>a.e(284).then(a.bind(a,1284)),{loadableGenerated:{webpack:()=>[1284]},ssr:!1});function g(){let[e,t]=(0,n.useState)(null),[a,d]=(0,n.useState)({isAnalyzing:!1,progress:0}),m=(0,n.useRef)(null),g=(0,n.useRef)(null),[f,x]=(0,n.useState)(!1),[j,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{x(!0),b(!0),m.current=new h},[]);let w=async e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){if(!s.type.startsWith("audio/")){d(e=>({...e,error:"Please upload an audio file"}));return}try{(await (0,c.t)()).userId,await (0,o.x)({key:"protected/".concat(s.name),data:s,options:{accessLevel:"protected",contentType:s.type}}).result,t(s),g.current&&(g.current.src=URL.createObjectURL(s))}catch(e){console.error("Upload error:",e),d(e=>({...e,error:"Upload failed. Please try again."}))}}},N=async()=>{if(e&&m.current){d({isAnalyzing:!0,progress:0});try{let t=await m.current.analyzeMusicFile(e);d({isAnalyzing:!1,progress:100,features:t})}catch(e){d(e=>({...e,isAnalyzing:!1,error:"Analysis failed. Please try again."}))}}};return f?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black text-white p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("h1",{className:"text-4xl font-bold mb-8 flex items-center gap-2",children:[(0,s.jsx)(l.Z,{className:"w-8 h-8"}),"Music Analysis Studio"]}),(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-8 mb-8",children:[(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-8 text-center",children:[(0,s.jsx)("input",{type:"file",accept:"audio/*",onChange:w,className:"hidden",id:"audio-upload"}),(0,s.jsxs)("label",{htmlFor:"audio-upload",className:"cursor-pointer flex flex-col items-center gap-4",children:[(0,s.jsx)(r.Z,{className:"w-12 h-12 text-gray-400"}),(0,s.jsx)("span",{className:"text-gray-400",children:"Drop your audio file here or click to upload"})]})]}),e&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("audio",{ref:g,controls:!0,className:"w-full mt-4"}),(0,s.jsx)("button",{onClick:N,className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full",disabled:a.isAnalyzing,children:a.isAnalyzing?"Analyzing...":"Analyze Music"})]})]}),a.features&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{backgroundColor:"#1f2937",borderRadius:"0.5rem",padding:"2rem"},children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Analysis Results"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)(y,{title:"Tempo",value:"".concat(a.features.tempo," BPM"),icon:(0,s.jsx)(l.Z,{className:"w-6 h-6"})}),(0,s.jsx)(y,{title:"Key & Scale",value:"".concat(a.features.key," ").concat(a.features.scale),icon:(0,s.jsx)(l.Z,{className:"w-6 h-6"})}),(0,s.jsx)(y,{title:"Mood",value:a.features.mood,icon:(0,s.jsx)(l.Z,{className:"w-6 h-6"})}),(0,s.jsx)(y,{title:"Energy",value:"".concat(Math.round(100*a.features.energy),"%"),icon:(0,s.jsx)(l.Z,{className:"w-6 h-6"})})]}),(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Marketing Recommendations"}),(0,s.jsx)("div",{className:"bg-gray-700 rounded-lg p-6",children:(0,s.jsx)("ul",{className:"list-disc list-inside space-y-2",children:(function(e){let t=[];return e.tempo>120&&t.push("Perfect for workout and high-energy playlists"),e.energy>.7&&t.push("Target peak-time radio slots and dance venues"),e.danceability>.8&&t.push("Strong potential for viral dance challenges"),"Calm"===e.mood&&t.push("Ideal for study/focus and wellness playlists"),t})(a.features).map((e,t)=>(0,s.jsx)("li",{children:e},t))})})]}),(0,s.jsx)(u,{audioFeatures:a.features})]}),j&&(0,s.jsx)(p,{})]})}):(0,s.jsx)("div",{children:"Loading..."})}let y=e=>{let{title:t,value:a,icon:n}=e;return(0,s.jsxs)("div",{className:"bg-gray-700 rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[n,(0,s.jsx)("h3",{className:"text-lg font-semibold",children:t})]}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:a})]})}}},function(e){e.O(0,[429,579,971,117,744],function(){return e(e.s=4190)}),_N_E=e.O()}]);