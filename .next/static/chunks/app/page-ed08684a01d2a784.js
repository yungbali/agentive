(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3051:function(e,t,a){Promise.resolve().then(a.bind(a,623))},623:function(e,t,a){"use strict";a.d(t,{default:function(){return p}});var i=a(7437),n=a(2265),r=a(200),s=a(3448);let l=r.fC,o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)(r.aV,{ref:t,className:(0,s.cn)("inline-flex h-14 items-center justify-center rounded-lg bg-gray-800/40 p-1 text-gray-300",a),...n})});o.displayName=r.aV.displayName;let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)(r.xz,{ref:t,className:(0,s.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-6 py-3 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-blue-600 data-[state=active]:text-white data-[state=active]:shadow-sm",a),...n})});d.displayName=r.xz.displayName;let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)(r.VY,{ref:t,className:(0,s.cn)("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2",a),...n})});c.displayName=r.VY.displayName;var u=a(166),f=a(5095);let g=(0,u.default)(()=>a.e(834).then(a.bind(a,9834)).then(e=>e.default),{loadableGenerated:{webpack:()=>[9834]},loading:()=>(0,i.jsx)("div",{children:"Loading..."}),ssr:!1}),b=(0,u.default)(()=>a.e(836).then(a.bind(a,8836)).then(e=>e.default),{loadableGenerated:{webpack:()=>[8836]},loading:()=>(0,i.jsx)("div",{children:"Loading..."}),ssr:!1}),m=(0,u.default)(()=>Promise.all([a.e(429),a.e(296),a.e(586)]).then(a.bind(a,3586)).then(e=>e.default),{loadableGenerated:{webpack:()=>[3586]},loading:()=>(0,i.jsx)("div",{children:"Loading..."}),ssr:!1}),y=(0,u.default)(()=>Promise.all([a.e(429),a.e(495)]).then(a.bind(a,8179)).then(e=>e.default),{loadableGenerated:{webpack:()=>[8179]},ssr:!1});function p(){let[e,t]=(0,n.useState)(!1),[a,r]=(0,n.useState)([]),s=async e=>{try{var a;t(!0);let i={id:Date.now().toString(),role:"user",content:"Strategy request for ".concat(e.category," in ").concat(e.region),timestamp:new Date},n=(Date.now()+1).toString(),s={id:n,role:"assistant",content:"",timestamp:new Date,status:"thinking"};r(e=>[...e,i,s]);let l=await fetch("/api/strategy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!l.ok)throw Error("Strategy generation failed");let o=null===(a=l.body)||void 0===a?void 0:a.getReader(),d=new TextDecoder,c="";if(o)for(;;){let{done:e,value:t}=await o.read();if(e)break;let a=d.decode(t);c+=a,r(e=>e.map(e=>e.id===n?{...e,content:c,status:"complete"}:e))}}catch(e){console.error("Strategy generation error:",e),r(e=>e.map(e=>"thinking"===e.status?{...e,content:"Strategy generation failed. Please try again.",status:"error"}:e))}finally{t(!1)}};return(0,i.jsxs)(l,{defaultValue:"strategy",className:"w-full",children:[(0,i.jsxs)(o,{className:"grid grid-cols-2 w-full max-w-2xl mx-auto mb-8",children:[(0,i.jsx)(d,{value:"strategy",children:"Strategy"}),(0,i.jsx)(d,{value:"distribution",children:"Distribution"})]}),(0,i.jsxs)(f.M,{mode:"wait",children:[(0,i.jsx)(c,{value:"strategy",children:(0,i.jsxs)(y,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-gray-900/40 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:[(0,i.jsx)(b,{onSubmit:s,isLoading:e}),(0,i.jsx)("div",{className:"mt-6 space-y-4",children:a.map(e=>(0,i.jsx)(m,{message:e},e.id))})]})}),(0,i.jsx)(c,{value:"distribution",children:(0,i.jsx)(y,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-gray-900/40 backdrop-blur-sm rounded-xl p-6 border border-gray-800",children:(0,i.jsx)(g,{})})})]})]})}},3448:function(e,t,a){"use strict";a.d(t,{cn:function(){return r}});var i=a(1994),n=a(3335);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,i.W)(t))}}},function(e){e.O(0,[747,971,117,744],function(){return e(e.s=3051)}),_N_E=e.O()}]);